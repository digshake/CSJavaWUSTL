---
title: "Extension 5.1: Chase, The Mouse"
canvasTitle: "Extension 5.1: Chase, The Mouse"
module: 5
extension: 1
points: 6
---
* This will be a TOC
{:toc}

# Authors
* Arman Guerra
* [Dennis Cosgrove](http://www.cs.wustl.edu/~cosgroved/)

# A Story

Chase, the Mouse, was standing still on the Standard Draw template one day, thinking about the meaning of life. All of a sudden, out of nowhere, a ball began to follow Chase. No matter where Chase went the ball would follow and pester Chase until he moved again. You will be writing the code for the ball.

# Procedure

1. Open `ChaseTheMouse.java` in the `mousechaser` package in the src folder.  You will have to complete several methods for this extension. 

2. Note `X` and `Y`.

	~~~java
	private static final int X = 0;
	private static final int Y = 1;
	~~~

	Use these to index the X and Y coordinates of the points represented as double arrays of length 2 in this extension.

2. Complete `getMousePosition()`.

	Return a created array of length 2 with the array item at the X index assigned to [StdDraw.mouseX()](https://introcs.cs.princeton.edu/java/stdlib/javadoc/StdDraw.html#mouseX--) and the array item at the Y index assigned to [StdDraw.mouseY()](https://introcs.cs.princeton.edu/java/stdlib/javadoc/StdDraw.html#mouseY--).

3. Run `MousePositionDebugApp` as a Java Application.

	<center><iframe width="480" height="270" src="https://www.youtube.com/embed/UEen1LteE9E?rel=0" frameborder="0" allowfullscreen></iframe></center>


4. Complete `drawBall(location, radius)`

5. Run `DrawBallDebugApp` as a Java Application.

	<center><iframe width="480" height="270" src="https://www.youtube.com/embed/a8z_2wBpA38?rel=0" frameborder="0" allowfullscreen></iframe></center>

6. Complete `square(v)`.

	**Question:** What is a simple way to implement squaring a number without calling `Math.pow(x,y)`?

7. Run `ChaseTheMouseTestSuite` as a JUnit Test.

	<center><iframe width="480" height="270" src="https://www.youtube.com/embed/M_vEO6g-S_w?rel=0" frameborder="0" allowfullscreen></iframe></center>
	Make any necessary edits to square until the Square test cases have all passed.


8. Complete `calculateMagnitude(xy)`.

	[Vector Magnitude on Wolfram MathWorld](https://mathworld.wolfram.com/VectorMagnitude.html)

	**Note:** vector `xy` only has 2 dimensions.

9. Run `ChaseTheMouseTestSuite`.

	Make any necessary edits to calculateMagnitude until the CalculateMagnitude test cases have all passed.

10. Complete `add(a, b)`.

	[Vector Addition on Wolfram MathWorld](https://mathworld.wolfram.com/VectorAddition.html)

	**Note:** vectors `a` and `b` only have 2 dimensions.

11. Run `ChaseTheMouseTestSuite`.

	Make any necessary edits to add until the Add test cases have all passed.

12. Complete `subtract(a, b)`.

	[Vector Subtraction on Wolfram MathWorld](https://mathworld.wolfram.com/VectorSubtraction.html)

	**Note:** vectors `a` and `b` only have 2 dimensions.

13. Run `ChaseTheMouseTestSuite`.

	Make any necessary edits to subtract until the Subtract test cases have all passed.

14. Complete `scalarMultiply(xy, scalar)`.

	[Scalar Multiplication on Wolfram MathWorld](https://mathworld.wolfram.com/ScalarMultiplication.html)

	[Scalar Multiplication on Wikipedia](https://en.wikipedia.org/wiki/Scalar_multiplication)

	**Note:** vector `xy` only has 2 dimensions.

15. Run `ChaseTheMouseTestSuite`.

	Make any necessary edits to scalarMultiply until the ScalarMultiply test cases have all passed.

16. Watch this video on Real Time Animation

	<center><iframe width="480" height="270" src="https://www.youtube.com/embed/nhDt5HVOzVM?rel=0" frameborder="0" allowfullscreen></iframe></center>

17. Complete `calculateNextPosition(currentBallPosition, mousePosition, speed, deltaTime)`.

	**Tip:** Use the utility methods you have writen above to implement this method.

	Rather than the speed of the animation being dependent on how fast our loop executes, we are going to keep track of our time to ensure that our ball always moves at a constant speed.

	Below are two different images which attempt to convey what is required:

	<img src="{{ site.baseurl }}/resources/extensions/5.01/single_frame.jpg">

	<img src="{{ site.baseurl }}/resources/extensions/5.01/chase_the_mouse.svg" width="640">

18. Run `ChaseTheMouseTestSuite`.

	`assertArrayEquals(contentsMessage, expected, actual, 0.0001);`

	Make any necessary edits to calculateNextPosition until the CalculateNextPosition test cases have all passed.

19. Run `CalculateNextPositionDebugApp` as a Java Application.

	<center><iframe width="480" height="270" src="https://www.youtube.com/embed/WkbEaztb7W0?rel=0" frameborder="0" allowfullscreen></iframe></center>

20. Complete `chaseTheMouse()`

	**Tip:** Use `Timing.getCurrentTimeInSeconds()` to... well... get the current time in seconds.  Within your loop, keep track of the previous time to calculate the change in time since the previous iteration of the loop.

21. Run `ChaseTheMouse` as a Java Application

<!--
You can test those with the JUnit test provided in the package. Once all of these methods are written, you will put them to use in the main method to create a Standard Draw template in which a ball follows your mouse. The methods that you must write are:

`double[] getMousePosition()`

: This method returns an array of two `doubles`, the x and y coordinates of the mouse. You can find the coordinates 
	of the mouse on the standard canvas using `StdDraw.mouseX()` and `StdDraw.mouseY()`
   
	1. Write that method so that the first `double` in the array that you return is the x coordinate of the mouse, and the second `double` is the y coordinate of the mouse. 
       
	2. Test this method using the JUnit test `GetMousePositionTest` in the `mousefollower` class. When you run this test, a ball will appear on a Standard Draw template. Try to follow the ball with your mouse while the test runs.

`drawBall(double[] position, double radius)` 

: This Method draws the ball wherever it should be in a specific frame. 
	 
	1. This should take in an array of 2 `doubles` that specifies the x and y coordinates of the ball and a `double` for the radius.
	
	2. Test this by manually drawing a ball in your main method at a specific x and y coordinate. You can use the following code:

	~~~java	
	double[] tester = new double[]{.5, .5};
	drawBall(tester, .2);
	StdDraw.show(2000);
	~~~

	If this draws a large ball in the middle of your template, then your `drawBall()` method works!

`double[] changePosition(double[] position, double[] mousePosition, double speed)` 

: This should return an array of 2 `doubles` that represents the new position of the ball

	1. This method takes in an array of 2 `doubles` that specifies the original position of the ball, an array of 2 `doubles` that 
		specifies the mouse position, and a `double` for the speed. 

		You are not simply drawing a ball at the position of the mouse. The ball should move at a constant speed towards the mouse at all times.
		This will require some basic geometry. However, you will not need to use any trigonometric functions. 
 		
		![]({{ site.baseurl }}/resources/extensions/5.01/SimilairTriangles.png)
		
		
		dx and dy are the distances from the ball to the mouse. The legs of the green triangle represent the x and y components of the distance the ball moves
		in each frame. The hypotenuse of the green triangle represents the total distance the ball moves in each frame. This is, effectively, the "speed" of the ball,
		distance per frame. 
 
Finally, make sure to implement all of these methods in the `main` method inside of a `while` loop, along with the other 
necessary `StdDraw` code. It would be helpful to set the initial position of the ball outside of the `while` loop, and then alter it inside.
-->